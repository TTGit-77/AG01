{% extends 'base.html' %}

{% block content %}
<div class="row mb-4">
    <div class="col-lg-5 mb-3 mb-lg-0">
        <div class="bg-dark rounded-3 p-3 shadow-sm text-center">
            <img src="{{ movie.poster_url }}" class="img-fluid rounded-3" alt="{{ movie.title }}" style="max-height:420px;min-height:220px;object-fit:cover;background:#e3f0ff;">
        </div>
    </div>
    <div class="col-lg-7">
        <h2 class="fw-bold mb-2">{{ movie.title }}</h2>
        <div class="mb-2">
            <span class="badge bg-gradient-primary me-2" style="background: linear-gradient(90deg,#1a2980,#26d0ce);font-size:1rem;">{{ movie.genre }}</span>
            <span class="badge bg-success me-2" style="font-size:1rem;">★ {{ movie.rating }}</span>
            <span class="badge bg-secondary">{{ movie.release_year }}</span>
        </div>
        <p class="mt-3 mb-2"><strong>Director:</strong> {{ movie.director }}</p>
        <p class="text-muted" style="font-size:1.1rem;">An epic cinematic experience. Book your seats now!</p>
        <hr>
        <h4 class="mb-3">Available Showtimes</h4>
        {% if showtimes %}
        <div class="table-responsive">
        <table class="table table-dark table-striped table-hover align-middle rounded-3 overflow-hidden">
            <thead>
                <tr style="background:linear-gradient(90deg,#1a2980,#26d0ce);color:#fff;">
                    <th>Date</th>
                    <th>Time</th>
                    <th>Screen</th>
                    <th>Seats Left</th>
                    <th>Price</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for show in showtimes %}
                <tr>
                    <td>{{ show.show_date }}</td>
                    <td>{{ show.show_time }}</td>
                    <td>{{ show.screen }}</td>
                    <td><span class="badge bg-info text-dark">{{ show.total_seats - (show.booked_seats.split(',')|length if show.booked_seats else 0) }}</span></td>
                    <td><span class="badge bg-gradient-primary" style="background:linear-gradient(90deg,#26d0ce,#1a2980);font-size:1rem;">₹200</span></td>
                    <td>
                        <a href="{{ url_for('book_seats', showtime_id=show.id) }}" class="btn btn-gradient btn-sm px-3">Book Seats</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        </div>
        {% else %}
        <p>No showtimes available for this movie.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
